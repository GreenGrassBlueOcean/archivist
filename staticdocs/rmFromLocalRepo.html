<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>rmFromLocalRepo. archivist 2.0.4</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="
Marcin Kosinski , &lt;a href='mailto:m.p.kosinski@gmail.com'&gt;m.p.kosinski@gmail.com&lt;/a&gt;
Witold Chodor , &lt;a href='mailto:witoldchodor@gmail.com'&gt;witoldchodor@gmail.com&lt;/a&gt;
">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">archivist 2.0.4</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Remove an Artifact Given as a md5hash from the Repository</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>rmFromLocalRepo(md5hash, repoDir&nbsp;=&nbsp;aoptions("repoDir"), removeData&nbsp;=&nbsp;FALSE, removeMiniature&nbsp;=&nbsp;FALSE, force&nbsp;=&nbsp;FALSE, many&nbsp;=&nbsp;FALSE)</div>
<div>rmFromRepo(...)</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>md5hash</dt>
      <dd>A character assigned to the artifact through the use of a
cryptographical hash function with MD5 algorithm, or it's abbreviation.
This object will be removed. If <code>many</code> parameter is set to TRUE then
md5hash will be a character vector.</dd>
      <dt>repoDir</dt>
      <dd>A character denoting an existing directory from which an 
artifact will be removed.</dd>
      <dt>removeData</dt>
      <dd>A logical value denoting whether to remove data along with
the <code>artifact</code> specified by the <code>md5hash</code>. Defualt <code>FALSE</code>.</dd>
      <dt>removeMiniature</dt>
      <dd>A logical value denoting whether to remove a miniature
along with the <code>artifact</code> specified by the <code>md5hash</code>. Defualt <code>FALSE</code>.</dd>
      <dt>force</dt>
      <dd>A logical value denoting whether to remove data related to more than one artifact.
Defualt <code>FALSE</code>.</dd>
      <dt>many</dt>
      <dd>A logical value. To accelerate the speed of removing many objects,
you can set this parameter to <code>TRUE</code> and pass a vector of artifacts' <code>md5hashes</code>
to a <code>md5hash</code> parameter. It is not possible to use a vector of artifacts' 
<code>md5hashes</code> abbreviations - see <code>Note</code>. By default, set to <code>FALSE</code>.</dd>
      <dt>...</dt>
      <dd>All arguments are being passed to <code>rmFromLocalRepo</code>.</dd>
    </dl>
    
    <div class="Description">
      <h2>Description</h2>

      <p><code>rmFromLocalRepo</code> removes an artifact given as a <code>md5hash</code> from the <a href='Repository.html'>Repository</a>.
To learn more about artifacts visit archivist-package.</p>
  
    </div>

    <div class="Details">
      <h2>Details</h2>

      <p><code>rmFromLocalRepo</code> removes an artifact given as a <a href='md5hash.html'>md5hash</a> from the <a href='Repository.html'>Repository</a>.
To be more precise, an artifact is removed 
both from <code>backpack.db</code> file(the SQLite database)and <code>gallery</code> subdirectory,
where the artifacts are stored as <code>md5hash.rda</code> files.</p>
  
      <p>Important: instead of giving the whole <code>md5hash</code> character, a user
can simply give its first few characters. For example, <code>"a09dd"</code> 
instead of <code>"a09ddjdkf9kj33dcjdnfjgos9jd9jkcv"</code>.
All artifacts with the same <code>md5hash</code> abbreviation  will be removed 
from the <code>Repository</code>.</p>
  
      <p><code>rmFromLocalRepo</code> provides functionality that enables us to delete miniatures
of the artifacts (.txt or .png files) while removing .rda files.
To delete miniature of the artifact use <code>removeMiniature = TRUE</code> argument.
Moreover, if the data from the artifact is archived then there is a possibility 
to delete this data while removing the artifact. Simply use <code>removeData = TRUE</code> argument.</p>
  
      <p>If one wants to remove all artifacts created between two dates, it is suggested to
perform:
<ul>
<li> <code>obj2rm <- searchInLocalRepo( tag = list(dateFrom, dateTo), repoDir = )</code>
   </li>
<li> <code>sapply(obj2rm, rmFromLocalRepo, repoDir = )</code>
</li>
</ul></p>
  
      <p></p>
  
    </div>

    <div class="Note">
      <h2>Note</h2>

      <p><code>md5hash</code> can be a result of the <a href='searchInRepo.html'>searchInLocalRepo</a> function called
by <code>tag = NAME</code> argument, where <code>NAME</code> is a Tag that describes
the property of the artifacts to be deleted.</p>
  
      <p>It is not possible to use a vector of artifacts' <code>md5hashes</code> abbreviations
while using <code>many = TRUE</code> argument. This assumption was made 
to protect a user from removing, by accident, too many artifacts from the Repository.</p>
  
      <p>For more information about <code>Tags</code> check <a href='Tags.html'>Tags</a>.</p>
  
      <p>Bug reports and feature requests can be sent to <a href = 'https://github.com/pbiecek/archivist/issues'>https://github.com/pbiecek/archivist/issues</a></p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'>## Not run: 
# # objects preparation
# data.frame object
# data(iris)
# 
# # ggplot/gg object
# library(ggplot2)
# df &lt;- data.frame(gp = factor(rep(letters[1:3], each = 10)),y = rnorm(30))
# library(plyr)
# ds &lt;- ddply(df, .(gp), summarise, mean = mean(y), sd = sd(y))
# myplot123 &lt;- ggplot(df, aes(x = gp, y = y)) +
#   geom_point() +  geom_point(data = ds, aes(y = mean),
#                              colour = &#39;red&#39;, size = 3)
# 
# # lm object
# model &lt;- lm(Sepal.Length~ Sepal.Width + Petal.Length + Petal.Width, data= iris)
# model2 &lt;- lm(Sepal.Length~ Sepal.Width + Petal.Width, data= iris)
# model3 &lt;- lm(Sepal.Length~ Sepal.Width, data= iris)
# 
# # agnes (twins) object
# library(cluster)
# data(votes.repub)
# agn1 &lt;- agnes(votes.repub, metric = &quot;manhattan&quot;, stand = TRUE)
# 
# # fanny (partition) object
# x &lt;- rbind(cbind(rnorm(10, 0, 0.5), rnorm(10, 0, 0.5)),
#            cbind(rnorm(15, 5, 0.5), rnorm(15, 5, 0.5)),
#            cbind(rnorm( 3,3.2,0.5), rnorm( 3,3.2,0.5)))
# fannyx &lt;- fanny(x, 2)
# 
# # creating example Repository - on which examples will work
# 
# exampleRepoDir &lt;- tempfile()
# createLocalRepo(repoDir = exampleRepoDir)
# myplot123Md5hash &lt;- saveToLocalRepo(myplot123, repoDir=exampleRepoDir)
# irisMd5hash &lt;- saveToLocalRepo(iris, repoDir=exampleRepoDir)
# modelMd5hash  &lt;- saveToLocalRepo(model, repoDir=exampleRepoDir)
# agn1Md5hash &lt;- saveToLocalRepo(agn1, repoDir=exampleRepoDir)
# fannyxMd5hash &lt;- saveToLocalRepo(fannyx, repoDir=exampleRepoDir)
# 
# # let&#39;s see how the Repository looks like: show
# showLocalRepo(method = &quot;md5hashes&quot;, repoDir = exampleRepoDir)
# showLocalRepo(method = &quot;tags&quot;, repoDir = exampleRepoDir)
# 
# # let&#39;s see how the Repository looks like: summary
# summaryLocalRepo( exampleRepoDir )
# 
# # remove examples
# 
# rmFromLocalRepo(fannyxMd5hash, repoDir = exampleRepoDir)
# # removeData = FALSE default argument provides from removing archived
# # fannyxMd5hash object&#39;s data from the Repository and the gallery
# rmFromLocalRepo(irisMd5hash, repoDir = exampleRepoDir)
#  
# # let&#39;s see how the Repository looks like: show
# showLocalRepo(method = &quot;md5hashes&quot;, repoDir = exampleRepoDir)
# showLocalRepo(method = &quot;tags&quot;, repoDir = exampleRepoDir)
# 
# # let&#39;s see how the Repository looks like: summary
# summaryLocalRepo( exampleRepoDir )
# 
# 
# # one can have the same object archived three different times,
# # there will appear a warning message
# agn1Md5hash2 &lt;- saveToLocalRepo(agn1, repoDir=exampleRepoDir)
# agn1Md5hash3 &lt;- saveToLocalRepo(agn1, repoDir=exampleRepoDir)
# 
# # md5hashes are the same for the same object (agn1)
# agn1Md5hash == agn1Md5hash2
# agn1Md5hash2 == agn1Md5hash3
# 
# # but in the Repository database (backpack.db)
# # there are three identical rows describing the object
# # as well as three identical rows describing object&#39;s data.
# 
# # let&#39;s see how the Repository looks like: show
# showLocalRepo(method = &quot;md5hashes&quot;, repoDir = exampleRepoDir)
# showLocalRepo(method = &quot;tags&quot;, repoDir = exampleRepoDir)
# 
# # let&#39;s see how the Repository looks like: summary
# summaryLocalRepo( exampleRepoDir )
# # in spite of multiplying object&#39;s appearance in database it is
# 
# # one easy call removes them all but this call will result in error
# rmFromLocalRepo(agn1Md5hash, repoDir = exampleRepoDir, removeData = TRUE, 
#             removeMiniature = TRUE)
# 
# # soultion to that is
# rmFromLocalRepo(agn1Md5hash, repoDir = exampleRepoDir, removeData = TRUE, 
#             removeMiniature = TRUE, force = TRUE)
# # removeMiniature = TRUE removes miniatures from the gallery folder
# 
# # rest of the artifacts can be removed for example by
# # looking for dates of creation and then removing all objects
# # created in a specific period of time
# 
# obj2rm &lt;- searchInLocalRepo( pattern = list(dateFrom = Sys.Date(), dateTo = Sys.Date()),
#                              repoDir = exampleRepoDir )
# sapply(obj2rm, rmFromLocalRepo, repoDir = exampleRepoDir)
# # above function call removed all objects which were created in these examples.
# # Note that in the gallery folder there may be still some miniatures as
# # removeMiniature parameter is set to FALSE
# 
# # let&#39;s see how the Repository looks like: show
# showLocalRepo(method = &quot;md5hashes&quot;, repoDir = exampleRepoDir)
# showLocalRepo(method = &quot;tags&quot;, repoDir = exampleRepoDir)
# 
# # one can also delete objects of a specific class
# modelMd5hash  &lt;- saveToLocalRepo(model, repoDir=exampleRepoDir)
# model2Md5hash  &lt;- saveToLocalRepo(model2, repoDir=exampleRepoDir)
# model3Md5hash  &lt;- saveToLocalRepo(model3, repoDir=exampleRepoDir)
# showLocalRepo(method = &quot;md5hashes&quot;, repoDir = exampleRepoDir)
# 
# objMd5hash &lt;- searchInLocalRepo(&quot;class:lm&quot;, repoDir = exampleRepoDir)
# sapply(objMd5hash, rmFromLocalRepo, repoDir = exampleRepoDir, removeData = TRUE, force = TRUE)
# showLocalRepo(method = &quot;md5hashes&quot;, repoDir = exampleRepoDir)
# summaryLocalRepo( exampleRepoDir )
# 
# 
# # one can remove object specifying only its md5hash abbreviation
# (myplo123Md5hash &lt;- saveToLocalRepo(myplot123, repoDir=exampleRepoDir))
# showLocalRepo(method = &quot;md5hashes&quot;, repoDir = exampleRepoDir)
# 
# # If md5hash is &quot;db50a4e667581f8c531acd78ad24bfee&quot; then
# # model abbreviation might be : &quot;db50a&quot;
# # Note that with each evaluation of createEmptyRepo function new md5hashes
# # are created. This is why, in your evaluation of the code, artifact 
# # myplo123Md5hash will have a different md5hash and the following
# # instruction will result in an error.
# rmFromLocalRepo(&quot;db40a&quot;, repoDir = exampleRepoDir, removeData = TRUE)
# summaryLocalRepo( repoDir = exampleRepoDir )
# 
# 
# # removing an example Repository
# 
# deleteLocalRepo( exampleRepoDir, TRUE)
# 
# 
# ######
# ######
# REMOVING MANY ARTIFACTS
# ######
# ######
# 
# data(iris)
# 
# # lm object
# model &lt;- lm(Sepal.Length~ Sepal.Width + Petal.Length + Petal.Width, data= iris)
# 
# # agnes (twins) object
# library(cluster)
# data(votes.repub)
# agn1 &lt;- agnes(votes.repub, metric = &quot;manhattan&quot;, stand = TRUE)
# 
# # fanny (partition) object
# x &lt;- rbind(cbind(rnorm(10, 0, 0.5), rnorm(10, 0, 0.5)),
#            cbind(rnorm(15, 5, 0.5), rnorm(15, 5, 0.5)),
#            cbind(rnorm( 3,3.2,0.5), rnorm( 3,3.2,0.5)))
# fannyx &lt;- fanny(x, 2)
# 
# # lda object
# library(MASS)
# 
# Iris &lt;- data.frame(rbind(iris3[,,1], iris3[,,2], iris3[,,3]),
#                   Sp = rep(c(&quot;s&quot;,&quot;c&quot;,&quot;v&quot;), rep(50,3)))
# train &lt;- c(8,83,115,118,146,82,76,9,70,139,85,59,78,143,68,
#            134,148,12,141,101,144,114,41,95,61,128,2,42,37,
#            29,77,20,44,98,74,32,27,11,49,52,111,55,48,33,38,
#            113,126,24,104,3,66,81,31,39,26,123,18,108,73,50,
#            56,54,65,135,84,112,131,60,102,14,120,117,53,138,5)
# lda1 &lt;- lda(Sp ~ ., Iris, prior = c(1,1,1)/3, subset = train)
# 
# # qda object
# tr &lt;- c(7,38,47,43,20,37,44,22,46,49,50,19,4,32,12,29,27,34,2,1,17,13,3,35,36)
# train &lt;- rbind(iris3[tr,,1], iris3[tr,,2], iris3[tr,,3])
# cl &lt;- factor(c(rep(&quot;s&quot;,25), rep(&quot;c&quot;,25), rep(&quot;v&quot;,25)))
# qda1 &lt;- qda(train, cl)
# 
# # glmnet object
# library( glmnet )
# 
# zk=matrix(rnorm(100*20),100,20)
# bk=rnorm(100)
# glmnet1=glmnet(zk,bk)
#  
# # Creating example Repository so that we may see it on our computer
# 
# exampleRepoDir &lt;- tempfile()
# createLocalRepo( repoDir = exampleRepoDir, force = TRUE)
# saveToLocalRepo( iris, repoDir=exampleRepoDir)
# saveToLocalRepo( model, repoDir=exampleRepoDir )
# saveToLocalRepo( agn1, repoDir=exampleRepoDir )
# saveToLocalRepo( fannyx, repoDir=exampleRepoDir )
# saveToLocalRepo( lda1, repoDir=exampleRepoDir )
# saveToLocalRepo( glmnet1, repoDir=exampleRepoDir )
# 
# ArtifactsAndData &lt;- unique(showLocalRepo(repoDir = exampleRepoDir)[,1])
# ArtifactsData &lt;- unique(searchInLocalRepo(pattern = &quot;relationWith&quot;, fixed = FALSE,
#                                    repoDir = exampleRepoDir))
# Artifacts &lt;- setdiff(ArtifactsAndData, ArtifactsData)
# 
# 
# # Removing many artifacts with many = TRUE argument
# rmFromLocalRepo(Artifacts, repoDir = exampleRepoDir, many = TRUE)
# 
# # We may notice, in two ways, that artifacts&#39; data is still in &quot;exampleRepoDir&quot;.
# # Either we may look into gallery folder of &quot;exampleRepoDir&quot; 
# list.files(file.path(exampleRepoDir, &quot;gallery&quot;))
# # or show how database.db file looks like.
# showLocalRepo(repoDir = exampleRepoDir) # artifacts&#39; data is there indeed!
# 
# # If we want to remove artifact&#39;s data now we simply call rmFromLocalRepo function
# # with removeData = TRUE additional argument.
# rmFromLocalRepo(Artifacts, repoDir = exampleRepoDir, removeData = TRUE,  many = TRUE)
# 
# # We receive a warning as Artifacts are no longer in the repository. 
# # However, let&#39;s check what happened with Artifact&#39;s data.
# showLocalRepo(repoDir = exampleRepoDir) # They were removed.
# # Perhaps you may think that &quot;exampleRepoDir&quot; is empty as database indicates. However,
# # if you look into gallery folder there will be some &quot;.txt&quot; or &quot;.png&quot; files. 
# list.files(file.path(exampleRepoDir, &quot;gallery&quot;))
# 
# # Those are probably, the so called, Miniatures. Let&#39;s try to remove them.
# # In order to do it we call rmFromLocalRepo function with removeMiniature = TRUE argument.
# rmFromLocalRepo(Artifacts, many = TRUE, repoDir = exampleRepoDir, removeMiniature = TRUE)
# 
# # Again we receive a warning as Artifacts are no longer in the repository but ...
# list.files(file.path(exampleRepoDir, &quot;gallery&quot;)) 
# # gallery folder is empty now! Artifact&#39;s miniature&#39;s were removed.
# 
# 
# # Of course we may have done all these instructions by one simple function call.
# # rmFromLocalRepo(Artifacts, many = TRUE, repoDir = exampleRepoDir,
# #            removeData = TRUE, removeMiniature = TRUE)
# # Nevertheless, it may be instructive to see how it is done step by step.
# 
# # removing an example Repository
# deleteLocalRepo(repoDir = exampleRepoDir, deleteRoot = TRUE)
#    
# rm( exampleRepoDir )
# ## End(Not run)
</div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>rmFromLocalRepo</li><li>rmFromRepo</li>
    </ul>
    <ul>
      
    </ul> -->
      
    <h2>See also</h2>
    
Other archivist: <code><a href='Repository.html'>Repository</a></code>,
  <code><a href='Tags.html'>Tags</a></code>, <code><a href='magrittr.html'>%a%</a></code>,
  <code><a href='addHooksToPrint.html'>addHooksToPrint</a></code>, <code><a href='addTagsRepo.html'>addTagsRepo</a></code>,
  <code><a href='aformat.html'>aformat</a></code>, <code><a href='ahistory.html'>ahistory</a></code>,
  <code><a href='alink.html'>alink</a></code>, <code><a href='archivistOptions.html'>aoptions</a></code>,
  <code><a href='archivist-package.html'>archivist-package</a></code>, <code><a href='aread.html'>aread</a></code>,
  <code><a href='asearch.html'>asearch</a></code>, <code><a href='asession.html'>asession</a></code>,
  <code><a href='cache.html'>cache</a></code>, <code><a href='copyToRepo.html'>copyLocalRepo</a></code>,
  <code><a href='createEmptyRepo.html'>createLocalRepo</a></code>,
  <code><a href='createMDGallery.html'>createMDGallery</a></code>,
  <code><a href='deleteLocalRepo.html'>deleteLocalRepo</a></code>,
  <code><a href='getRemoteHook.html'>getRemoteHook</a></code>, <code><a href='getTags.html'>getTagsLocal</a></code>,
  <code><a href='loadFromRepo.html'>loadFromLocalRepo</a></code>, <code><a href='md5hash.html'>md5hash</a></code>,
  <code><a href='restoreLibs.html'>restoreLibs</a></code>, <code><a href='saveToRepo.html'>saveToLocalRepo</a></code>,
  <code><a href='searchInRepo.html'>searchInLocalRepo</a></code>,
  <code><a href='setRepo.html'>setLocalRepo</a></code>,
  <code><a href='shinySearchInRepo.html'>shinySearchInLocalRepo</a></code>,
  <code><a href='showRepo.html'>showLocalRepo</a></code>,
  <code><a href='splitTags.html'>splitTagsLocal</a></code>,
  <code><a href='summaryRepo.html'>summaryLocalRepo</a></code>,
  <code><a href='zipRepo.html'>zipLocalRepo</a></code>

Other archivist: <code><a href='Repository.html'>Repository</a></code>,
  <code><a href='Tags.html'>Tags</a></code>, <code><a href='magrittr.html'>%a%</a></code>,
  <code><a href='addHooksToPrint.html'>addHooksToPrint</a></code>, <code><a href='addTagsRepo.html'>addTagsRepo</a></code>,
  <code><a href='aformat.html'>aformat</a></code>, <code><a href='ahistory.html'>ahistory</a></code>,
  <code><a href='alink.html'>alink</a></code>, <code><a href='archivistOptions.html'>aoptions</a></code>,
  <code><a href='archivist-package.html'>archivist-package</a></code>, <code><a href='aread.html'>aread</a></code>,
  <code><a href='asearch.html'>asearch</a></code>, <code><a href='asession.html'>asession</a></code>,
  <code><a href='cache.html'>cache</a></code>, <code><a href='copyToRepo.html'>copyLocalRepo</a></code>,
  <code><a href='createEmptyRepo.html'>createLocalRepo</a></code>,
  <code><a href='createMDGallery.html'>createMDGallery</a></code>,
  <code><a href='deleteLocalRepo.html'>deleteLocalRepo</a></code>,
  <code><a href='getRemoteHook.html'>getRemoteHook</a></code>, <code><a href='getTags.html'>getTagsLocal</a></code>,
  <code><a href='loadFromRepo.html'>loadFromLocalRepo</a></code>, <code><a href='md5hash.html'>md5hash</a></code>,
  <code><a href='restoreLibs.html'>restoreLibs</a></code>, <code><a href='saveToRepo.html'>saveToLocalRepo</a></code>,
  <code><a href='searchInRepo.html'>searchInLocalRepo</a></code>,
  <code><a href='setRepo.html'>setLocalRepo</a></code>,
  <code><a href='shinySearchInRepo.html'>shinySearchInLocalRepo</a></code>,
  <code><a href='showRepo.html'>showLocalRepo</a></code>,
  <code><a href='splitTags.html'>splitTagsLocal</a></code>,
  <code><a href='summaryRepo.html'>summaryLocalRepo</a></code>,
  <code><a href='zipRepo.html'>zipLocalRepo</a></code>

    
    <h2>Author</h2>
    
Marcin Kosinski , <a href='mailto:m.p.kosinski@gmail.com'>m.p.kosinski@gmail.com</a>
Witold Chodor , <a href='mailto:witoldchodor@gmail.com'>witoldchodor@gmail.com</a>

    
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="https://getbootstrap.com/2.0.4/">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>